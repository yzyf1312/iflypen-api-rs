# Iflyrec CLI 工具

这是一个用于与讯飞听见 API 交互的命令行工具，支持音频文件转录任务提交。

---

## 📦 功能特性
- 音频文件上传与转录任务创建
- 热词优化（支持中文/英文逗号分隔）
- 多语言支持（中文/英文）
- 短信通知提醒
- 自动提取最常用 session_id
- 下载转录结果

---

## 📝 使用方法

### 1. 准备工作
#### 获取 Cookies 数据库
- **Windows**: 复制 `%APPDATA%\讯飞听见\Cookies` 文件到运行目录
- 其余平台路径未知

#### 准备音频文件
将待转录的音频文件放在运行目录，或在运行时指定其完整路径。

---

### 2. 基础命令
```bash
# 最简使用
./iflyrec-cli -f data.mp3

# 完整参数示例
./iflyrec-cli -f data.mp3 -n "会议录音" -w "Rust,WebRTC,AI" -l cn -s -d Cookies

# 通过订单ID下载结果
./iflyrec-cli -o 1234567890
```

---

## 📌 参数说明

| 参数 | 全称         | 描述                   | 默认值    |
| ---- | ------------ | ---------------------- | --------- |
| `-f` | `--file`     | 音频文件路径           | 无        |
| `-n` | `--name`     | 转录任务名称           | 自动生成  |
| `-w` | `--hotwords` | 热词列表（逗号分隔）   | 空        |
| `-l` | `--lang`     | 语言类型               | `cn`      |
| `-s` | `--sms`      | 启用短信通知           | 禁用      |
| `-d` | `--db`       | Cookies 数据库路径     | `Cookies` |
| `-o` | `--order-id` | 已有订单ID（下载模式） | 无        |

---

## 📂 文件结构基础要求
```
./
 ├── iflyrec-cli       # 可执行文件
 ├── Cookies             # 讯飞听见会话数据库
 └── data.mp3            # 待转录音频
```

---

## ⚠️ 注意事项
1. 需保持讯飞听见账号处于登录状态
2. 热词最大支持量未知
4. session_id 过期时需重新登录讯飞听见客户端并获取新数据库

---

## 📋 常见错误处理

| 错误信息                  | 解决方案                      |
| ------------------------- | ----------------------------- |
| `未找到有效的 session_id` | 确认 Cookies 文件路径及有效性 |
| `数据库访问错误`          | 检查文件权限或是否被锁定      |
| `转录任务提交失败`        | 检查网络连接及账号            |

---

## 🧪 示例场景

### 示例 1：基础转录
```bash
./iflyrec-cli -f data.mp3
```

### 示例 2：带热词和短信通知
```bash
./iflyrec-cli -f data.mp3 -w "人工智能,机器学习" -s
```

### 示例 3：英文会议记录
```bash
./iflyrec-cli -f meeting.wav -n "EngMeeting" -l en
```

---

如遇问题请提交 issue 或 pull request。
